# Домашнее задание. Тесты

## какие сценарии вы проверяете интеграционными тестами? +обоснование
Интеграционные тесты написаны с помощью hermione. Проверяется работа клиента на реакте в связке с Node.js-сервером, все на реальной базе данных.
Сценарий:
- у пользователя указаны настройки. Он вводит новые настройки, нажимает Save, переходит на страницу с историей билдов, возвращается на страницу c настройками и видит измененные настройки. Здесь мы проверяем, что запрос отправился на сервер, был обработан, сохранен в БД. 


## из каких логических блоков состоит ваше приложение и какие их сценарии вы проверяете модульными тестами? +обоснование
Приложение состоит из клиента на реакте и сервера на Node.js. Клиент на реакте реализован через хуки useState, в каждом компоненте реализована логика запросов к серверу. Сервер - это по сути прокси между клиентом и базой данных, который еще может клонировать репозиторий и искать по нему некоторые данные.

Архитектура очень плохая, поэтому тестировать трудно. 
- функции неатомарны, отвечают за множество разных действий. 
- запросы к API сервера и к API базы данных не вынесены в отдельные методы, отсутствует контроллер. Поэтому невозможно сделать stub без рефакторинга.
- отсутствует redux, поэтому в коде клиента нет разделения между логикой приложения и отображением. 
- сайд эффекты присутствуют в компонентах реакт приложения (useState вместо useEffect повсеместно), поэтому затруднительно написать модульные тесты на реакт без рефакторинга.

Во всем коде можно выделить несколько блоков, которые можно покрыть модульными тестами:
- функция конвертации даты и времени в реакт приложении
- функция поиска коммита по commitHash, но для этого требуется иметь репозиторий
- функции в server_utils

## как запустить тесты?
```
npm install
```
В отдельной консоли
```
selenium-standalone start
```
Еще в одной отдельной консоли
```
node server/server
```
В третьей консоли
```
cd client
npm start
```
В другой консоли, запуск интеграционных тестов:
```
.\node_modules\.bin\hermione  .\tests\integration\
```

Запуск юнит-тестов:
```
mocha .\tests\unit\
```